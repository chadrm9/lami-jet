<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <h4 class="page-header">Login</h4>
      <form class="form" name="form" ng-submit="vm.login(form)" novalidate>

        <div class="form-group" ng-class="{ 'has-error': (form.email.$invalid || form.email.$error) 
                                                          && vm.submitted.email }">
          <input type="email" id="email" name="email" class="form-control" ng-model="vm.user.email" 
                  placeholder="Email" ng-change="vm.errors.other ? vm.setSubmitFlags(false) : 
                  vm.submitted.email = false" required mongoose-error>
          <p class="help-block" ng-show="(form.email.$error.required || form.email.$error.email) && 
                                          vm.submitted.email" ng-bind="'Invalid email address'"></p>
        </div>

        <div class="form-group" ng-class="{ 'has-error': (form.password.$invalid || form.password.$error) 
                                                          && vm.submitted.password }">
          <input type="password" name="password" class="form-control" ng-model="vm.user.password" 
                  placeholder="Password" ng-change="vm.errors.other ? vm.setSubmitFlags(false) : 
                  vm.submitted.password = false" required mongoose-error>
          <p class="help-block" ng-show="form.password.$error.required && vm.submitted.password" 
            ng-bind="'Invalid password'"></p>
          
          <p class="help-block" ng-show="form.email.$valid && form.password.$valid && vm.errors.other 
                                        && vm.submitted.email && vm.submitted.password" 
                                        ng-bind="vm.errors.other"></p>
        </div>

        <div>
          <button class="btn btn-primary" type="submit"><i class="glyphicon glyphicon-log-in"></i>
            Login</button>
        </div>
      </form>
    </div>
  </div>
  <hr>
</div>
